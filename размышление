- необходимо, чтобы создавалась комната на n количество людей
- нужно, чтобы люди могли играть в дурака
- нужно, чтобы они играли на деньги
- в конце нужно, чтобы подсчитывался выйгрышь и те, кто выйграл, получали вознаграждения, а кто проиграл, уходил в минус


комнат может быть несколько и в разных комнатах могут сидеть игроки и играть
когда игра закончилась, нужно закрывать команту
как это можно сделать?
можно реализовать через потока
как реализовать подключение игрока к комнате?
можно реализовать через поток. Т.е. когда пользователь авторизируется в систему, то для него создаётся отдельный
поток с различными состояними по типу в комнате он или нет

как будет реализовано?
когда пользователь авторизировался, то для него создаётся отдельный поток, где он колбасится
когда он заходит в комнату, то в его внутрнее состояние/поток устанавливается значение, что он сейчас в комнате

какие сущности можно представить?
- users => тут будут хранится пользователи
- transactions => тут будут хранится все транзакции по игре. Например пользователь победил, то будет транзакция по добавлению деняг
                  Плюс можно будет отследить все его начисления и плюс можно прикрепить интеграцию со внешними системами оплатами
                  если захочу добавить донаты
- wallets => тут будет хранится пользовательский кошелёк. А зачем? Чтобы можно было начислять ему деньгу будь то это
                  выйгрышь в игре или донат


где хранить временные данные по типу:
- количество карт в комнате
- какие карты у игроков
- набор карт, что сейчас скинули
- кто сейчас ходит

а что делать, если кто-то выйграл и ушёл из комнаты, кто как быть если на него сейчас очередь?
нужно как-то указать, то его пропускам
как?
как мы вообще понимаем, что есть :
- такой набор игроков
- кто на данный момент подаёт
- кто может ему подкидывать?
можно создать список игроков и по мере присоединения/выхода, можно как добавлять, так и удалять элемент списка
и тогда можно понять кто сейчас подаёт и кто ему может подавать

где тогда можно хранить временные данные?
в redis

как нам отличить, две комнаты друг от друга?
нужен какой-то идентификатор
какого типа?
можно указать тип uuid
где можно будет хранить этот идентификатор в redis
почему?
потому что он нам не нужен в реляционной бд и он будет временным
почему?
а зачем он нужен?
разве не будет хранится история?
будет, но на текущий момент нет, это будет новая фича

а из чего будет формировать uuid?
он будет формироваться из времени создания
а что будет если будет два события, которые создадутся одновременно и у них будут одинаковые параметры?
нет, 2 uuid с одинаковыми параметрами будут одинаковыми


какие гипотетические ключи могут быть в редисе?
- идентификатор комнаты в лице uuid
- список игроков в комнате
- кто сейчас ходит
- сколько сейчас карт


нужо создать ttl для ключей?
конечно